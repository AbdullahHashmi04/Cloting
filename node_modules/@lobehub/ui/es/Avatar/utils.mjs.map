{"version":3,"file":"utils.mjs","names":[],"sources":["../../src/Avatar/utils.ts"],"sourcesContent":["import { isValidElement, type ReactNode } from 'react';\n\n/**\n * 判断 avatar 是否是默认的 Ant Design Avatar 类型\n * (URL 路径或 React 元素)\n */\nexport const isDefaultAntAvatar = (avatar: ReactNode): boolean => {\n  if (!avatar) return false;\n\n  const isStringAvatar = typeof avatar === 'string';\n  const isUrlOrDataUri =\n    isStringAvatar && ['/', 'http', 'data:'].some((prefix) => avatar.startsWith(prefix));\n\n  return Boolean(isUrlOrDataUri || isValidElement(avatar));\n};\n\n/**\n * 判断是否有有效的背景色\n */\nexport const hasValidBackground = (background?: string | null): boolean => {\n  return Boolean(\n    background &&\n    background !== 'transparent' &&\n    background !== 'rgba(0,0,0,0)' &&\n    background !== null,\n  );\n};\n\n/**\n * 获取用于可读性计算的实际颜色值\n * 如果是 CSS 变量，返回 fallback 值\n */\nexport const getActualColorForReadable = (\n  background: string | undefined,\n  fallbackColor: string,\n): string => {\n  const bgColor = background || fallbackColor;\n\n  // 如果背景是 CSS 变量，使用 fallback 颜色\n  if (typeof bgColor === 'string' && bgColor.startsWith('var(')) {\n    return fallbackColor;\n  }\n\n  return bgColor;\n};\n\n/**\n * 格式化头像文本（转大写并可选切片）\n */\nexport const formatAvatarText = (text: string | undefined, sliceText: boolean): string => {\n  if (!text) return '';\n\n  const upperText = text.toUpperCase();\n  return sliceText ? upperText.slice(0, 2) : upperText;\n};\n\n/**\n * 计算 emoji 大小\n */\nexport const calculateEmojiSize = (\n  size: number,\n  hasBackground: boolean,\n  emojiScaleWithBackground: boolean,\n): number => {\n  if (emojiScaleWithBackground) {\n    return hasBackground ? size * 0.85 : size;\n  }\n  return size * 0.85;\n};\n"],"mappings":";;;;;;;AAMA,MAAa,sBAAsB,WAA+B;AAChE,KAAI,CAAC,OAAQ,QAAO;CAGpB,MAAM,iBADiB,OAAO,WAAW,YAErB;EAAC;EAAK;EAAQ;EAAQ,CAAC,MAAM,WAAW,OAAO,WAAW,OAAO,CAAC;AAEtF,QAAO,QAAQ,kBAAkB,eAAe,OAAO,CAAC;;;;;AAM1D,MAAa,sBAAsB,eAAwC;AACzE,QAAO,QACL,cACA,eAAe,iBACf,eAAe,mBACf,eAAe,KAChB;;;;;;AAOH,MAAa,6BACX,YACA,kBACW;CACX,MAAM,UAAU,cAAc;AAG9B,KAAI,OAAO,YAAY,YAAY,QAAQ,WAAW,OAAO,CAC3D,QAAO;AAGT,QAAO;;;;;AAMT,MAAa,oBAAoB,MAA0B,cAA+B;AACxF,KAAI,CAAC,KAAM,QAAO;CAElB,MAAM,YAAY,KAAK,aAAa;AACpC,QAAO,YAAY,UAAU,MAAM,GAAG,EAAE,GAAG;;;;;AAM7C,MAAa,sBACX,MACA,eACA,6BACW;AACX,KAAI,yBACF,QAAO,gBAAgB,OAAO,MAAO;AAEvC,QAAO,OAAO"}