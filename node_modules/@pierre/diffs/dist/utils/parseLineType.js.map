{"version":3,"file":"parseLineType.js","names":[],"sources":["../../src/utils/parseLineType.ts"],"sourcesContent":["import type { HunkLineType } from '../types';\n\nexport interface ParsedLine {\n  line: string;\n  type: Exclude<HunkLineType, 'expanded'>;\n}\n\nexport function parseLineType(line: string): ParsedLine | undefined {\n  const firstChar = line[0];\n  if (\n    firstChar !== '+' &&\n    firstChar !== '-' &&\n    firstChar !== ' ' &&\n    firstChar !== '\\\\'\n  ) {\n    console.error(\n      `parseLineType: Invalid firstChar: \"${firstChar}\", full line: \"${line}\"`\n    );\n    return undefined;\n  }\n  const processedLine = line.substring(1);\n  return {\n    // NOTE(amadeus): If the line is empty, we should make it a\n    // newline to force shiki to highlight the row. This should\n    // only really ever apply as the last line of a hunk that was most likely\n    // processed via a string and not a file since patch files will include a\n    // newline here by default\n    line: processedLine === '' ? '\\n' : processedLine,\n    type:\n      firstChar === ' '\n        ? 'context'\n        : firstChar === '\\\\'\n          ? 'metadata'\n          : firstChar === '+'\n            ? 'addition'\n            : 'deletion',\n  };\n}\n"],"mappings":";AAOA,SAAgB,cAAc,MAAsC;CAClE,MAAM,YAAY,KAAK;AACvB,KACE,cAAc,OACd,cAAc,OACd,cAAc,OACd,cAAc,MACd;AACA,UAAQ,MACN,sCAAsC,UAAU,iBAAiB,KAAK,GACvE;AACD;;CAEF,MAAM,gBAAgB,KAAK,UAAU,EAAE;AACvC,QAAO;EAML,MAAM,kBAAkB,KAAK,OAAO;EACpC,MACE,cAAc,MACV,YACA,cAAc,OACZ,aACA,cAAc,MACZ,aACA;EACX"}